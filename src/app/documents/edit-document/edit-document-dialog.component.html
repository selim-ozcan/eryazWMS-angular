<form class="form-horizontal" autocomplete="off" #editProductForm="ngForm" (ngSubmit)="save()">
    <abp-modal-header [title]="'Edit Document' | localize" (onCloseClick)="bsModalRef.hide()">
    </abp-modal-header>
    <div class="modal-body">
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="documentNumber">
                {{ "Document Number" | localize }}
            </label>
            <div class="col-md-9">
                <input type="text" class="form-control" name="documentNumber" id="documentNumber" minlength="2"
                    maxlength="64" [(ngModel)]="document.documentNumber" #documentNumberModel="ngModel"
                    #documentNumberEl disabled />
                <!-- <abp-validation-summary [control]="documentNumberModel" [controlEl]="documentNumberEl">
                </abp-validation-summary> -->
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="documentDate">
                {{ "Document Date" | localize }}
            </label>
            <div class="col-md-9">
                <input type="text" class="form-control" name="documentDate" id="documentDate" maxlength="128"
                    [(ngModel)]="document.documentDate" #documentDateModel="ngModel" #documentDateEl disabled />
                <!-- <abp-validation-summary [control]="documentDateModel" [controlEl]="documentDateEl">
                </abp-validation-summary> -->
            </div>
        </div>
        <div class="form-group row">
            <label class="col-md-3 col-form-label" for="registrationDate">
                {{ "Registration Date" | localize }}
            </label>
            <div class="col-md-9">
                <input type="text" class="form-control" name="registrationDate" id="registrationDate" maxlength="128"
                    [(ngModel)]="document.registrationDate" #registrationDateModel="ngModel" #registrationDateEl
                    disabled />
                <!-- <abp-validation-summary [control]="registrationDateModel" [controlEl]="registrationDateEl">
                </abp-validation-summary> -->
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-bordered" [busy]="isTableLoading">
                <thead class="bg-light">
                    <tr>
                        <th>{{ "Customer Code" | localize }}</th>
                        <th>{{ "Product Code" | localize }}</th>
                        <th>{{ "Product Name" | localize }}</th>
                        <th>{{ "Brand" | localize }}</th>
                        <th>{{ "Warehouse Name" | localize }}</th>
                        <th>{{ "Stock" | localize }}</th>
                        <th>{{ "Status" | localize }}</th>

                        <th>{{ "Actions" | localize }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="
                    let movement of document.movements" [@elementDeletion]>
                        <td>{{ document.customer.customerCode }}</td>
                        <td>{{ movement.product.productCode }}</td>
                        <td>{{ movement.product.productName }}</td>
                        <td>{{ movement.product.brand }}</td>
                        <td>{{ movement.warehouse.warehouseName }}</td>
                        <th>{{ movement.stock }}</th>
                        <th>{{ isMovementCompleted(movement) == true ? 'Main': 'Entrance'}}</th>
                        <td style="display: flex; justify-content: space-around;">
                            <button [disabled]="isMovementCompleted(movement)" type="button"
                                class="btn btn-sm bg-primary" (click)="completeMovement(movement)">
                                <i class="fas fa-check"></i>
                                {{ isMovementCompleted(movement) ? "Completed": "Complete" | localize }}
                            </button>
                            <div *ngIf="!isMovementCompleted(movement)" style="display: flex; align-items:center">
                                <button
                                    style="border-top-right-radius: 0 !important; border-bottom-right-radius: 0 !important; margin-right: 0 !important"
                                    type="button" class="btn btn-sm bg-info mx-2"
                                    (click)="updateMovement(movement, quantityUpdateInput)">
                                    <i class="fas fa-eraser"></i>
                                    {{ "Update" | localize }}
                                </button>
                                <input type="number" #quantityUpdateInput value="0"
                                    style="display: inlie-block; width: 50px; height: 100%; border-bottom-left-radius: 1px; border-top-left-radius: 1px;" />
                            </div>

                            <button *ngIf="!isMovementCompleted(movement)" type="button"
                                class="btn btn-sm bg-danger mx-2" (click)="deleteMovement(movement)">
                                <i class="fas fa-trash"></i>
                                {{ "Delete" | localize }}
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="btn-container" style="display: flex; justify-content: center;">
            <button type="button" class="btn btn-primary" style="text-align: center" [disabled]="!isDocumentCompletable"
                (click)="finishDocument()">Finish</button>
        </div>

    </div>
    <!-- <abp-modal-footer [cancelDisabled]="saving" [saveDisabled]="!editProductForm.form.valid || saving"
        (onCancelClick)="bsModalRef.hide()"></abp-modal-footer> -->
</form>