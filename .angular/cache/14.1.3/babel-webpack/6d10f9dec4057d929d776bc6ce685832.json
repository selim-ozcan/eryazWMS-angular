{"ast":null,"code":"import _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector } from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { ChangeUserLanguageDto } from '@shared/service-proxies/service-proxies';\nimport { filter as _filter } from 'lodash-es';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"ngx-bootstrap/dropdown\";\n\nfunction HeaderLanguageMenuComponent_div_5_ng_container_1_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 7);\n    i0.ɵɵlistener(\"click\", function HeaderLanguageMenuComponent_div_5_ng_container_1_a_1_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      var language_r2 = i0.ɵɵnextContext().$implicit;\n      var ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.changeLanguage(language_r2.name));\n    });\n    i0.ɵɵelement(1, \"i\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var language_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"d-inline-block \", language_r2.icon, \" mr-1\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", language_r2.displayName, \" \");\n  }\n}\n\nfunction HeaderLanguageMenuComponent_div_5_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, HeaderLanguageMenuComponent_div_5_ng_container_1_a_1_Template, 3, 4, \"a\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var language_r2 = ctx.$implicit;\n    var ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", language_r2.name != ctx_r1.currentLanguage.name);\n  }\n}\n\nfunction HeaderLanguageMenuComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, HeaderLanguageMenuComponent_div_5_ng_container_1_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.languages);\n  }\n}\n\nexport var HeaderLanguageMenuComponent = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(HeaderLanguageMenuComponent, _AppComponentBase);\n\n  var _super = _createSuper(HeaderLanguageMenuComponent);\n\n  function HeaderLanguageMenuComponent(injector, _userService) {\n    var _this;\n\n    _classCallCheck(this, HeaderLanguageMenuComponent);\n\n    _this = _super.call(this, injector);\n    _this._userService = _userService;\n    return _this;\n  }\n\n  _createClass(HeaderLanguageMenuComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.languages = _filter(this.localization.languages, function (l) {\n        return !l.isDisabled;\n      });\n      this.currentLanguage = this.localization.currentLanguage;\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(languageName) {\n      var input = new ChangeUserLanguageDto();\n      input.languageName = languageName;\n\n      this._userService.changeLanguage(input).subscribe(function () {\n        abp.utils.setCookieValue('Abp.Localization.CultureName', languageName, new Date(new Date().getTime() + 5 * 365 * 86400000), // 5 year\n        abp.appPath);\n        window.location.reload();\n      });\n    }\n  }]);\n\n  return HeaderLanguageMenuComponent;\n}(AppComponentBase);\n\nHeaderLanguageMenuComponent.ɵfac = function HeaderLanguageMenuComponent_Factory(t) {\n  return new (t || HeaderLanguageMenuComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.UserServiceProxy));\n};\n\nHeaderLanguageMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderLanguageMenuComponent,\n  selectors: [[\"header-language-menu\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 6,\n  vars: 4,\n  consts: [[\"dropdown\", \"\", 1, \"nav-item\", \"dropdown\"], [\"href\", \"javascript:;\", \"dropdownToggle\", \"\", 1, \"nav-link\"], [1, \"d-none\", \"d-md-inline-block\", \"ml-1\"], [\"class\", \"dropdown-menu dropdown-menu-right p-0\", 4, \"dropdownMenu\"], [1, \"dropdown-menu\", \"dropdown-menu-right\", \"p-0\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"dropdown-item\", \"href\", \"javascript:;\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"javascript:;\", 1, \"dropdown-item\", 3, \"click\"]],\n  template: function HeaderLanguageMenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"li\", 0)(1, \"a\", 1);\n      i0.ɵɵelement(2, \"i\");\n      i0.ɵɵelementStart(3, \"span\", 2);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, HeaderLanguageMenuComponent_div_5_Template, 2, 1, \"div\", 3);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassMapInterpolate1(\"d-inline-block \", ctx.currentLanguage.icon, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.currentLanguage.displayName, \" \");\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.BsDropdownMenuDirective, i3.BsDropdownToggleDirective, i3.BsDropdownDirective],\n  encapsulation: 2,\n  changeDetection: 0\n});","map":{"version":3,"mappings":";;;;AAAA,SAIEA,QAJF,QAKO,eALP;AAMA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,SAEEC,qBAFF,QAGO,yCAHP;AAIA,SAASC,MAAM,IAAIC,OAAnB,QAAkC,WAAlC;;;;;;;;;;ICFMC;IAIEA;MAAAA;MAAA;MAAA;MAAA,OAASA,uDAAT;IAAsC,CAAtC;IAEAA;IACAA;IACFA;;;;;IAFKA;IAAAA;IACHA;IAAAA;;;;;;IARJA;IACEA;IASFA;;;;;;IARKA;IAAAA;;;;;;IAHPA;IACEA;IAWFA;;;;;IAXqCA;IAAAA;;;;ADUvC,WAAaC,2BAAb;EAAA;;EAAA;;EAKE,qCAAYC,QAAZ,EAAwCC,YAAxC,EAAsE;IAAA;;IAAA;;IACpE,0BAAMD,QAAN;IADsC;IAA8B;EAErE;;EAPH;IAAA;IAAA,OASE,oBAAQ;MACN,KAAKE,SAAL,GAAiBL,OAAO,CACtB,KAAKM,YAAL,CAAkBD,SADI,EAEtB,UAACE,CAAD;QAAA,OAAO,CAACA,CAAC,CAACC,UAAV;MAAA,CAFsB,CAAxB;MAIA,KAAKC,eAAL,GAAuB,KAAKH,YAAL,CAAkBG,eAAzC;IACD;EAfH;IAAA;IAAA,OAiBE,wBAAeC,YAAf,EAAmC;MACjC,IAAMC,KAAK,GAAG,IAAIb,qBAAJ,EAAd;MACAa,KAAK,CAACD,YAAN,GAAqBA,YAArB;;MAEA,KAAKN,YAAL,CAAkBQ,cAAlB,CAAiCD,KAAjC,EAAwCE,SAAxC,CAAkD,YAAK;QACrDC,GAAG,CAACC,KAAJ,CAAUC,cAAV,CACE,8BADF,EAEEN,YAFF,EAGE,IAAIO,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuB,IAAI,GAAJ,GAAU,QAA1C,CAHF,EAGuD;QACrDJ,GAAG,CAACK,OAJN;QAOAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB;MACD,CATD;IAUD;EA/BH;;EAAA;AAAA,EAAiDzB,gBAAjD;;;mBAAaK,6BAA2BD;AAAA;;;QAA3BC;EAA2BqB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MClBxC3B,8BAAuC,CAAvC,EAAuC,GAAvC,EAAuC,CAAvC;MAEIA;MACAA;MACEA;MACFA;MAEFA;MAaFA;;;;MAlBOA;MAAAA;MAEDA;MAAAA","names":["Injector","AppComponentBase","ChangeUserLanguageDto","filter","_filter","i0","HeaderLanguageMenuComponent","injector","_userService","languages","localization","l","isDisabled","currentLanguage","languageName","input","changeLanguage","subscribe","abp","utils","setCookieValue","Date","getTime","appPath","window","location","reload","selectors","features","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/app/layout/header-language-menu.component.ts","/Users/selim/repo/eryaz/angular/src/app/layout/header-language-menu.component.html"],"sourcesContent":["import {\n  Component,\n  ChangeDetectionStrategy,\n  OnInit,\n  Injector\n} from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport {\n  UserServiceProxy,\n  ChangeUserLanguageDto\n} from '@shared/service-proxies/service-proxies';\nimport { filter as _filter } from 'lodash-es';\n\n@Component({\n  selector: 'header-language-menu',\n  templateUrl: './header-language-menu.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeaderLanguageMenuComponent extends AppComponentBase\n  implements OnInit {\n  languages: abp.localization.ILanguageInfo[];\n  currentLanguage: abp.localization.ILanguageInfo;\n\n  constructor(injector: Injector, private _userService: UserServiceProxy) {\n    super(injector);\n  }\n\n  ngOnInit() {\n    this.languages = _filter(\n      this.localization.languages,\n      (l) => !l.isDisabled\n    );\n    this.currentLanguage = this.localization.currentLanguage;\n  }\n\n  changeLanguage(languageName: string): void {\n    const input = new ChangeUserLanguageDto();\n    input.languageName = languageName;\n\n    this._userService.changeLanguage(input).subscribe(() => {\n      abp.utils.setCookieValue(\n        'Abp.Localization.CultureName',\n        languageName,\n        new Date(new Date().getTime() + 5 * 365 * 86400000), // 5 year\n        abp.appPath\n      );\n\n      window.location.reload();\n    });\n  }\n}\n","<li class=\"nav-item dropdown\" dropdown>\n  <a href=\"javascript:;\" class=\"nav-link\" dropdownToggle>\n    <i class=\"d-inline-block {{ currentLanguage.icon }}\"></i>\n    <span class=\"d-none d-md-inline-block ml-1\">\n      {{ currentLanguage.displayName }}\n    </span>\n  </a>\n  <div class=\"dropdown-menu dropdown-menu-right p-0\" *dropdownMenu>\n    <ng-container *ngFor=\"let language of languages\">\n      <a\n        *ngIf=\"language.name != currentLanguage.name\"\n        class=\"dropdown-item\"\n        href=\"javascript:;\"\n        (click)=\"changeLanguage(language.name)\"\n      >\n        <i class=\"d-inline-block {{ language.icon }} mr-1\"></i>\n        {{ language.displayName }}\n      </a>\n    </ng-container>\n  </div>\n</li>\n"]},"metadata":{},"sourceType":"module"}