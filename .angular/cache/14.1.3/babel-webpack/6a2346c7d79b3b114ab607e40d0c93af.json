{"ast":null,"code":"import _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector } from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { AppTenantAvailabilityState } from '@shared/AppEnums';\nimport { IsTenantAvailableInput } from '@shared/service-proxies/service-proxies';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../shared/components/modal/abp-modal-header.component\";\nimport * as i5 from \"../../shared/components/modal/abp-modal-footer.component\";\nimport * as i6 from \"@shared/pipes/localize.pipe\";\nexport var TenantChangeDialogComponent = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(TenantChangeDialogComponent, _AppComponentBase);\n\n  var _super = _createSuper(TenantChangeDialogComponent);\n\n  function TenantChangeDialogComponent(injector, _accountService, bsModalRef) {\n    var _this;\n\n    _classCallCheck(this, TenantChangeDialogComponent);\n\n    _this = _super.call(this, injector);\n    _this._accountService = _accountService;\n    _this.bsModalRef = bsModalRef;\n    _this.saving = false;\n    _this.tenancyName = '';\n    return _this;\n  }\n\n  _createClass(TenantChangeDialogComponent, [{\n    key: \"save\",\n    value: function save() {\n      var _this2 = this;\n\n      if (!this.tenancyName) {\n        abp.multiTenancy.setTenantIdCookie(undefined);\n        this.bsModalRef.hide();\n        location.reload();\n        return;\n      }\n\n      var input = new IsTenantAvailableInput();\n      input.tenancyName = this.tenancyName;\n      this.saving = true;\n\n      this._accountService.isTenantAvailable(input).subscribe(function (result) {\n        switch (result.state) {\n          case AppTenantAvailabilityState.Available:\n            abp.multiTenancy.setTenantIdCookie(result.tenantId);\n            location.reload();\n            return;\n\n          case AppTenantAvailabilityState.InActive:\n            _this2.message.warn(_this2.l('TenantIsNotActive', _this2.tenancyName));\n\n            break;\n\n          case AppTenantAvailabilityState.NotFound:\n            _this2.message.warn(_this2.l('ThereIsNoTenantDefinedWithName{0}', _this2.tenancyName));\n\n            break;\n        }\n      }, function () {\n        _this2.saving = false;\n      });\n    }\n  }]);\n\n  return TenantChangeDialogComponent;\n}(AppComponentBase);\n\nTenantChangeDialogComponent.ɵfac = function TenantChangeDialogComponent_Factory(t) {\n  return new (t || TenantChangeDialogComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.AccountServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalRef));\n};\n\nTenantChangeDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TenantChangeDialogComponent,\n  selectors: [[\"ng-component\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 16,\n  vars: 12,\n  consts: [[\"autocomplete\", \"off\", 1, \"form-horizontal\", 3, \"ngSubmit\"], [\"changeTenantForm\", \"ngForm\"], [3, \"title\", \"onCloseClick\"], [1, \"modal-body\"], [1, \"form-group\", \"row\"], [\"for\", \"tenancyName\", 1, \"col-md-3\", \"col-form-label\"], [1, \"col-md-9\"], [\"type\", \"text\", \"id\", \"tenancyName\", \"name\", \"tenancyName\", \"maxlength\", \"64\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fa\", \"fa-info-circle\"], [3, \"cancelDisabled\", \"saveDisabled\", \"onCancelClick\"]],\n  template: function TenantChangeDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function TenantChangeDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵelementStart(2, \"abp-modal-header\", 2);\n      i0.ɵɵlistener(\"onCloseClick\", function TenantChangeDialogComponent_Template_abp_modal_header_onCloseClick_2_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵpipe(3, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function TenantChangeDialogComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.tenancyName = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"span\");\n      i0.ɵɵelement(12, \"i\", 8);\n      i0.ɵɵtext(13);\n      i0.ɵɵpipe(14, \"localize\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"abp-modal-footer\", 9);\n      i0.ɵɵlistener(\"onCancelClick\", function TenantChangeDialogComponent_Template_abp_modal_footer_onCancelClick_15_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      var _r0 = i0.ɵɵreference(1);\n\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(3, 6, \"ChangeTenant\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 8, \"TenancyName\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.tenancyName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 10, \"LeaveEmptyToSwitchToHost\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"cancelDisabled\", ctx.saving)(\"saveDisabled\", !_r0.form.valid || ctx.saving);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.MaxLengthValidator, i3.NgModel, i3.NgForm, i4.AbpModalHeaderComponent, i5.AbpModalFooterComponent, i6.LocalizePipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;AAAA,SAAoBA,QAApB,QAAoC,eAApC;AAEA,SAASC,gBAAT,QAAiC,4BAAjC;AAEA,SAASC,0BAAT,QAA2C,kBAA3C;AACA,SACEC,sBADF,QAGO,yCAHP;;;;;;;;AAQA,WAAaC,2BAAb;EAAA;;EAAA;;EAIE,qCACEC,QADF,EAEUC,eAFV,EAGSC,UAHT,EAG+B;IAAA;;IAAA;;IAE7B,0BAAMF,QAAN;IAHQ;IACD;IANT,eAAS,KAAT;IACA,oBAAc,EAAd;IAK+B;EAG9B;;EAVH;IAAA;IAAA,OAYE,gBAAI;MAAA;;MACF,IAAI,CAAC,KAAKG,WAAV,EAAuB;QACrBC,GAAG,CAACC,YAAJ,CAAiBC,iBAAjB,CAAmCC,SAAnC;QACA,KAAKL,UAAL,CAAgBM,IAAhB;QACAC,QAAQ,CAACC,MAAT;QACA;MACD;;MAED,IAAMC,KAAK,GAAG,IAAIb,sBAAJ,EAAd;MACAa,KAAK,CAACR,WAAN,GAAoB,KAAKA,WAAzB;MAEA,KAAKS,MAAL,GAAc,IAAd;;MACA,KAAKX,eAAL,CAAqBY,iBAArB,CAAuCF,KAAvC,EAA8CG,SAA9C,CACE,UAACC,MAAD,EAAoC;QAClC,QAAQA,MAAM,CAACC,KAAf;UACE,KAAKnB,0BAA0B,CAACoB,SAAhC;YACEb,GAAG,CAACC,YAAJ,CAAiBC,iBAAjB,CAAmCS,MAAM,CAACG,QAA1C;YACAT,QAAQ,CAACC,MAAT;YACA;;UACF,KAAKb,0BAA0B,CAACsB,QAAhC;YACE,MAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB,MAAI,CAACC,CAAL,CAAO,mBAAP,EAA4B,MAAI,CAACnB,WAAjC,CAAlB;;YACA;;UACF,KAAKN,0BAA0B,CAAC0B,QAAhC;YACE,MAAI,CAACH,OAAL,CAAaC,IAAb,CACE,MAAI,CAACC,CAAL,CAAO,mCAAP,EAA4C,MAAI,CAACnB,WAAjD,CADF;;YAGA;QAZJ;MAcD,CAhBH,EAiBE,YAAK;QACH,MAAI,CAACS,MAAL,GAAc,KAAd;MACD,CAnBH;IAqBD;EA7CH;;EAAA;AAAA,EAAiDhB,gBAAjD;;;mBAAaG,6BAA2ByB;AAAA;;;QAA3BzB;EAA2B0B;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbxCN;MAIEA;QAAA,OAAYO,UAAZ;MAAkB,CAAlB;MAEAP;MAEEA;QAAA,OAAgBO,qBAAhB;MAAiC,CAAjC;;MACDP;MACDA,+BAAwB,CAAxB,EAAwB,KAAxB,EAAwB,CAAxB,EAAwB,CAAxB,EAAwB,OAAxB,EAAwB,CAAxB;MAGMA;;MACFA;MACAA,+BAAsB,EAAtB,EAAsB,OAAtB,EAAsB,CAAtB;MAMIA;QAAA;MAAA;MALFA;MAUJA;MACEA;MACAA;;MACFA;MAEFA;MAGEA;QAAA,OAAiBO,qBAAjB;MAAkC,CAAlC;MACDP;;;;;;MA5BCA;MAAAA;MAMIA;MAAAA;MAQEA;MAAAA;MAOJA;MAAAA;MAIFA;MAAAA,4CAAyB,cAAzB,EAAyB,6BAAzB","names":["Injector","AppComponentBase","AppTenantAvailabilityState","IsTenantAvailableInput","TenantChangeDialogComponent","injector","_accountService","bsModalRef","tenancyName","abp","multiTenancy","setTenantIdCookie","undefined","hide","location","reload","input","saving","isTenantAvailable","subscribe","result","state","Available","tenantId","InActive","message","warn","l","NotFound","i0","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/account/tenant/tenant-change-dialog.component.ts","/Users/selim/repo/eryaz/angular/src/account/tenant/tenant-change-dialog.component.html"],"sourcesContent":["import { Component, Injector } from '@angular/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { AccountServiceProxy } from '@shared/service-proxies/service-proxies';\nimport { AppTenantAvailabilityState } from '@shared/AppEnums';\nimport {\n  IsTenantAvailableInput,\n  IsTenantAvailableOutput\n} from '@shared/service-proxies/service-proxies';\n\n@Component({\n  templateUrl: './tenant-change-dialog.component.html'\n})\nexport class TenantChangeDialogComponent extends AppComponentBase {\n  saving = false;\n  tenancyName = '';\n\n  constructor(\n    injector: Injector,\n    private _accountService: AccountServiceProxy,\n    public bsModalRef: BsModalRef\n  ) {\n    super(injector);\n  }\n\n  save(): void {\n    if (!this.tenancyName) {\n      abp.multiTenancy.setTenantIdCookie(undefined);\n      this.bsModalRef.hide();\n      location.reload();\n      return;\n    }\n\n    const input = new IsTenantAvailableInput();\n    input.tenancyName = this.tenancyName;\n\n    this.saving = true;\n    this._accountService.isTenantAvailable(input).subscribe(\n      (result: IsTenantAvailableOutput) => {\n        switch (result.state) {\n          case AppTenantAvailabilityState.Available:\n            abp.multiTenancy.setTenantIdCookie(result.tenantId);\n            location.reload();\n            return;\n          case AppTenantAvailabilityState.InActive:\n            this.message.warn(this.l('TenantIsNotActive', this.tenancyName));\n            break;\n          case AppTenantAvailabilityState.NotFound:\n            this.message.warn(\n              this.l('ThereIsNoTenantDefinedWithName{0}', this.tenancyName)\n            );\n            break;\n        }\n      },\n      () => {\n        this.saving = false;\n      }\n    );\n  }\n}\n","<form\n  class=\"form-horizontal\"\n  autocomplete=\"off\"\n  #changeTenantForm=\"ngForm\"\n  (ngSubmit)=\"save()\"\n>\n  <abp-modal-header\n    [title]=\"'ChangeTenant' | localize\"\n    (onCloseClick)=\"bsModalRef.hide()\"\n  ></abp-modal-header>\n  <div class=\"modal-body\">\n    <div class=\"form-group row\">\n      <label class=\"col-md-3 col-form-label\" for=\"tenancyName\">\n        {{ \"TenancyName\" | localize }}\n      </label>\n      <div class=\"col-md-9\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          id=\"tenancyName\"\n          name=\"tenancyName\"\n          [(ngModel)]=\"tenancyName\"\n          maxlength=\"64\"\n        />\n      </div>\n    </div>\n    <span>\n      <i class=\"fa fa-info-circle\"></i>\n      {{ \"LeaveEmptyToSwitchToHost\" | localize }}\n    </span>\n  </div>\n  <abp-modal-footer\n    [cancelDisabled]=\"saving\"\n    [saveDisabled]=\"!changeTenantForm.form.valid || saving\"\n    (onCancelClick)=\"bsModalRef.hide()\"\n  ></abp-modal-footer>\n</form>\n"]},"metadata":{},"sourceType":"module"}