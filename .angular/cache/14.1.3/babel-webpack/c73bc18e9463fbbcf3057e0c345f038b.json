{"ast":null,"code":"import _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector } from '@angular/core';\nimport { finalize } from 'rxjs/operators';\nimport { appModuleAnimation } from '@shared/animations/routerTransition';\nimport { PagedListingComponentBase, PagedRequestDto } from '@shared/paged-listing-component-base';\nimport { CreateRoleDialogComponent } from './create-role/create-role-dialog.component';\nimport { EditRoleDialogComponent } from './edit-role/edit-role-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../shared/components/pagination/abp-pagination-controls.component\";\nimport * as i6 from \"../../shared/directives/busy.directive\";\nimport * as i7 from \"@shared/pipes/localize.pipe\";\nimport * as i8 from \"ngx-pagination\";\n\nfunction RolesComponent_tr_41_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function RolesComponent_tr_41_Template_button_click_6_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var role_r1 = restoredCtx.$implicit;\n      var ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editRole(role_r1));\n    });\n    i0.ɵɵelement(7, \"i\", 32);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"localize\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function RolesComponent_tr_41_Template_button_click_10_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r3);\n      var role_r1 = restoredCtx.$implicit;\n      var ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.delete(role_r1));\n    });\n    i0.ɵɵelement(11, \"i\", 34);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"localize\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var role_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(role_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(role_r1.displayName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 4, \"Edit\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 6, \"Delete\"), \" \");\n  }\n}\n\nvar _c0 = function _c0(a1, a2, a3) {\n  return {\n    id: \"server\",\n    itemsPerPage: a1,\n    currentPage: a2,\n    totalItems: a3\n  };\n};\n\nvar PagedRolesRequestDto = /*#__PURE__*/function (_PagedRequestDto) {\n  _inherits(PagedRolesRequestDto, _PagedRequestDto);\n\n  var _super = _createSuper(PagedRolesRequestDto);\n\n  function PagedRolesRequestDto() {\n    _classCallCheck(this, PagedRolesRequestDto);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(PagedRolesRequestDto);\n}(PagedRequestDto);\n\nexport var RolesComponent = /*#__PURE__*/function (_PagedListingComponen) {\n  _inherits(RolesComponent, _PagedListingComponen);\n\n  var _super2 = _createSuper(RolesComponent);\n\n  function RolesComponent(injector, _rolesService, _modalService) {\n    var _this;\n\n    _classCallCheck(this, RolesComponent);\n\n    _this = _super2.call(this, injector);\n    _this._rolesService = _rolesService;\n    _this._modalService = _modalService;\n    _this.roles = [];\n    _this.keyword = '';\n    return _this;\n  }\n\n  _createClass(RolesComponent, [{\n    key: \"list\",\n    value: function list(request, pageNumber, finishedCallback) {\n      var _this2 = this;\n\n      request.keyword = this.keyword;\n\n      this._rolesService.getAll(request.keyword, request.skipCount, request.maxResultCount).pipe(finalize(function () {\n        finishedCallback();\n      })).subscribe(function (result) {\n        _this2.roles = result.items;\n\n        _this2.showPaging(result, pageNumber);\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(role) {\n      var _this3 = this;\n\n      abp.message.confirm(this.l('RoleDeleteWarningMessage', role.displayName), undefined, function (result) {\n        if (result) {\n          _this3._rolesService.delete(role.id).pipe(finalize(function () {\n            abp.notify.success(_this3.l('SuccessfullyDeleted'));\n\n            _this3.refresh();\n          })).subscribe(function () {});\n        }\n      });\n    }\n  }, {\n    key: \"createRole\",\n    value: function createRole() {\n      this.showCreateOrEditRoleDialog();\n    }\n  }, {\n    key: \"editRole\",\n    value: function editRole(role) {\n      this.showCreateOrEditRoleDialog(role.id);\n    }\n  }, {\n    key: \"showCreateOrEditRoleDialog\",\n    value: function showCreateOrEditRoleDialog(id) {\n      var _this4 = this;\n\n      var createOrEditRoleDialog;\n\n      if (!id) {\n        createOrEditRoleDialog = this._modalService.show(CreateRoleDialogComponent, {\n          class: 'modal-lg'\n        });\n      } else {\n        createOrEditRoleDialog = this._modalService.show(EditRoleDialogComponent, {\n          class: 'modal-lg',\n          initialState: {\n            id: id\n          }\n        });\n      }\n\n      createOrEditRoleDialog.content.onSave.subscribe(function () {\n        _this4.refresh();\n      });\n    }\n  }]);\n\n  return RolesComponent;\n}(PagedListingComponentBase);\n\nRolesComponent.ɵfac = function RolesComponent_Factory(t) {\n  return new (t || RolesComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.RoleServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalService));\n};\n\nRolesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RolesComponent,\n  selectors: [[\"ng-component\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 55,\n  vars: 33,\n  consts: [[1, \"content-header\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-6\"], [1, \"col-6\", \"text-right\"], [\"href\", \"javascript:;\", 1, \"btn\", \"bg-blue\", 3, \"click\"], [1, \"fa\", \"fa-plus-square\"], [1, \"content\", \"px-2\"], [1, \"card\"], [1, \"card-header\"], [1, \"col-md-6\"], [1, \"input-group\"], [1, \"input-group-prepend\"], [\"type\", \"button\", 1, \"btn\", \"bg-blue\", 3, \"click\"], [1, \"fas\", \"fa-search\"], [\"type\", \"text\", \"name\", \"keyword\", 1, \"form-control\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-bordered\", 3, \"busy\"], [1, \"bg-light\"], [2, \"width\", \"200px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card-footer\", \"table-card-footer\", \"bg-light\", \"border-top\"], [1, \"col-sm-4\", \"col-12\", \"text-sm-left\", \"text-center\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"fas\", \"fa-redo-alt\"], [1, \"col-sm-4\", \"col-12\", \"text-center\"], [1, \"mb-0\", \"my-2\"], [1, \"col-sm-4\", \"col-12\"], [1, \"float-sm-right\", \"m-auto\"], [\"id\", \"server\", 3, \"pageChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"bg-secondary\", 3, \"click\"], [1, \"fas\", \"fa-pencil-alt\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"bg-danger\", \"mx-2\", 3, \"click\"], [1, \"fas\", \"fa-trash\"]],\n  template: function RolesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"section\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\");\n      i0.ɵɵtext(6);\n      i0.ɵɵpipe(7, \"localize\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 4)(9, \"a\", 5);\n      i0.ɵɵlistener(\"click\", function RolesComponent_Template_a_click_9_listener() {\n        return ctx.createRole();\n      });\n      i0.ɵɵelement(10, \"i\", 6);\n      i0.ɵɵtext(11);\n      i0.ɵɵpipe(12, \"localize\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(13, \"section\", 7)(14, \"div\", 1)(15, \"div\", 8)(16, \"div\", 9)(17, \"div\", 2);\n      i0.ɵɵelement(18, \"div\", 10);\n      i0.ɵɵelementStart(19, \"div\", 10)(20, \"div\", 11)(21, \"div\", 12)(22, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function RolesComponent_Template_button_click_22_listener() {\n        return ctx.getDataPage(1);\n      });\n      i0.ɵɵelement(23, \"i\", 14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"input\", 15);\n      i0.ɵɵlistener(\"ngModelChange\", function RolesComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.keyword = $event;\n      })(\"keyup.enter\", function RolesComponent_Template_input_keyup_enter_24_listener() {\n        return ctx.getDataPage(1);\n      });\n      i0.ɵɵpipe(25, \"localize\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(26, \"div\", 16)(27, \"div\", 17)(28, \"table\", 18)(29, \"thead\", 19)(30, \"tr\")(31, \"th\");\n      i0.ɵɵtext(32);\n      i0.ɵɵpipe(33, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"th\");\n      i0.ɵɵtext(35);\n      i0.ɵɵpipe(36, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"th\", 20);\n      i0.ɵɵtext(38);\n      i0.ɵɵpipe(39, \"localize\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(40, \"tbody\");\n      i0.ɵɵtemplate(41, RolesComponent_tr_41_Template, 14, 8, \"tr\", 21);\n      i0.ɵɵpipe(42, \"paginate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(43, \"div\", 22)(44, \"div\", 2)(45, \"div\", 23)(46, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function RolesComponent_Template_button_click_46_listener() {\n        return ctx.refresh();\n      });\n      i0.ɵɵelement(47, \"i\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(48, \"div\", 26)(49, \"p\", 27);\n      i0.ɵɵtext(50);\n      i0.ɵɵpipe(51, \"localize\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(52, \"div\", 28)(53, \"div\", 29)(54, \"abp-pagination-controls\", 30);\n      i0.ɵɵlistener(\"pageChange\", function RolesComponent_Template_abp_pagination_controls_pageChange_54_listener($event) {\n        return ctx.getDataPage($event);\n      });\n      i0.ɵɵelementEnd()()()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"@routerTransition\", undefined);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 11, \"Roles\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(12, 13, \"Create\"), \" \");\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(25, 15, \"SearchWithThreeDot\"))(\"ngModel\", ctx.keyword);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"busy\", ctx.isTableLoading);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(33, 17, \"RoleName\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(36, 19, \"DisplayName\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(39, 21, \"Actions\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(42, 23, ctx.roles, i0.ɵɵpureFunction3(29, _c0, ctx.pageSize, ctx.pageNumber, ctx.totalItems)));\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(51, 26, \"TotalRecordsCount\", ctx.totalItems), \" \");\n    }\n  },\n  dependencies: [i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.AbpPaginationControlsComponent, i6.BusyDirective, i7.LocalizePipe, i8.PaginatePipe],\n  encapsulation: 2,\n  data: {\n    animation: [appModuleAnimation()]\n  }\n});","map":{"version":3,"mappings":"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","names":["Injector","finalize","appModuleAnimation","PagedListingComponentBase","PagedRequestDto","CreateRoleDialogComponent","EditRoleDialogComponent","i0","PagedRolesRequestDto","RolesComponent","injector","_rolesService","_modalService","request","pageNumber","finishedCallback","keyword","getAll","skipCount","maxResultCount","pipe","subscribe","result","roles","items","showPaging","role","abp","message","confirm","l","displayName","undefined","delete","id","notify","success","refresh","showCreateOrEditRoleDialog","createOrEditRoleDialog","show","class","initialState","content","onSave","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/app/roles/roles.component.ts","/Users/selim/repo/eryaz/angular/src/app/roles/roles.component.html"],"sourcesContent":["import { Component, Injector } from '@angular/core';\nimport { finalize } from 'rxjs/operators';\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\nimport { appModuleAnimation } from '@shared/animations/routerTransition';\nimport {\n  PagedListingComponentBase,\n  PagedRequestDto\n} from '@shared/paged-listing-component-base';\nimport {\n  RoleServiceProxy,\n  RoleDto,\n  RoleDtoPagedResultDto\n} from '@shared/service-proxies/service-proxies';\nimport { CreateRoleDialogComponent } from './create-role/create-role-dialog.component';\nimport { EditRoleDialogComponent } from './edit-role/edit-role-dialog.component';\n\nclass PagedRolesRequestDto extends PagedRequestDto {\n  keyword: string;\n}\n\n@Component({\n  templateUrl: './roles.component.html',\n  animations: [appModuleAnimation()]\n})\nexport class RolesComponent extends PagedListingComponentBase<RoleDto> {\n  roles: RoleDto[] = [];\n  keyword = '';\n\n  constructor(\n    injector: Injector,\n    private _rolesService: RoleServiceProxy,\n    private _modalService: BsModalService\n  ) {\n    super(injector);\n  }\n\n  list(\n    request: PagedRolesRequestDto,\n    pageNumber: number,\n    finishedCallback: Function\n  ): void {\n    request.keyword = this.keyword;\n\n    this._rolesService\n      .getAll(request.keyword, request.skipCount, request.maxResultCount)\n      .pipe(\n        finalize(() => {\n          finishedCallback();\n        })\n      )\n      .subscribe((result: RoleDtoPagedResultDto) => {\n        this.roles = result.items;\n        this.showPaging(result, pageNumber);\n      });\n  }\n\n  delete(role: RoleDto): void {\n    abp.message.confirm(\n      this.l('RoleDeleteWarningMessage', role.displayName),\n      undefined,\n      (result: boolean) => {\n        if (result) {\n          this._rolesService\n            .delete(role.id)\n            .pipe(\n              finalize(() => {\n                abp.notify.success(this.l('SuccessfullyDeleted'));\n                this.refresh();\n              })\n            )\n            .subscribe(() => {});\n        }\n      }\n    );\n  }\n\n  createRole(): void {\n    this.showCreateOrEditRoleDialog();\n  }\n\n  editRole(role: RoleDto): void {\n    this.showCreateOrEditRoleDialog(role.id);\n  }\n\n  showCreateOrEditRoleDialog(id?: number): void {\n    let createOrEditRoleDialog: BsModalRef;\n    if (!id) {\n      createOrEditRoleDialog = this._modalService.show(\n        CreateRoleDialogComponent,\n        {\n          class: 'modal-lg',\n        }\n      );\n    } else {\n      createOrEditRoleDialog = this._modalService.show(\n        EditRoleDialogComponent,\n        {\n          class: 'modal-lg',\n          initialState: {\n            id: id,\n          },\n        }\n      );\n    }\n\n    createOrEditRoleDialog.content.onSave.subscribe(() => {\n      this.refresh();\n    });\n  }\n}\n","<div [@routerTransition]>\n  <section class=\"content-header\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h1>{{ \"Roles\" | localize }}</h1>\n        </div>\n        <div class=\"col-6 text-right\">\n          <a href=\"javascript:;\"\n            class=\"btn bg-blue\"\n            (click)=\"createRole()\">\n            <i class=\"fa fa-plus-square\"></i>\n            {{ \"Create\" | localize }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </section>\n  <section class=\"content px-2\">\n    <div class=\"container-fluid\">\n      <div class=\"card\">\n        <div class=\"card-header\">\n          <div class=\"row\">\n            <div class=\"col-md-6\">&emsp;</div>\n            <div class=\"col-md-6\">\n              <div class=\"input-group\">\n                <div class=\"input-group-prepend\">\n                  <button type=\"button\"\n                    class=\"btn bg-blue\"\n                    (click)=\"getDataPage(1)\">\n                    <i class=\"fas fa-search\"></i>\n                  </button>\n                </div>\n                <input type=\"text\"\n                  class=\"form-control\"\n                  name=\"keyword\"\n                  [placeholder]=\"'SearchWithThreeDot' | localize\"\n                  [(ngModel)]=\"keyword\"\n                  (keyup.enter)=\"getDataPage(1)\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"card-body\">\n          <div class=\"table-responsive\">\n            <table class=\"table table-striped table-bordered\"\n              [busy]=\"isTableLoading\">\n              <thead class=\"bg-light\">\n                <tr>\n                  <th>{{ \"RoleName\" | localize }}</th>\n                  <th>{{ \"DisplayName\" | localize }}</th>\n                  <th style=\"width: 200px;\">{{ \"Actions\" | localize }}</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"\n                  let role of roles\n                    | paginate\n                      : {\n                          id: 'server',\n                          itemsPerPage: pageSize,\n                          currentPage: pageNumber,\n                          totalItems: totalItems\n                        }\n                \">\n                  <td>{{ role.name }}</td>\n                  <td>{{ role.displayName }}</td>\n                  <td>\n                    <button type=\"button\"\n                      class=\"btn btn-sm bg-secondary\"\n                      (click)=\"editRole(role)\">\n                      <i class=\"fas fa-pencil-alt\"></i>\n                      {{ \"Edit\" | localize }}\n                    </button>\n                    <button type=\"button\"\n                      class=\"btn btn-sm bg-danger mx-2\"\n                      (click)=\"delete(role)\">\n                      <i class=\"fas fa-trash\"></i>\n                      {{ \"Delete\" | localize }}\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class=\"card-footer table-card-footer bg-light border-top\">\n          <div class=\"row\">\n            <div class=\"col-sm-4 col-12 text-sm-left text-center\">\n              <button class=\"btn btn-secondary\"\n                (click)=\"refresh()\">\n                <i class=\"fas fa-redo-alt\"></i>\n              </button>\n            </div>\n            <div class=\"col-sm-4 col-12 text-center\">\n              <p class=\"mb-0 my-2\">\n                {{ \"TotalRecordsCount\" | localize: totalItems }}\n              </p>\n            </div>\n            <div class=\"col-sm-4 col-12\">\n              <div class=\"float-sm-right m-auto\">\n                <abp-pagination-controls id=\"server\"\n                  (pageChange)=\"getDataPage($event)\">\n                </abp-pagination-controls>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</div>"]},"metadata":{},"sourceType":"module"}