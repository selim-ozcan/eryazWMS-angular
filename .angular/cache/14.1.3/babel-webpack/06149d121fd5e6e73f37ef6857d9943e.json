{"ast":null,"code":"import _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector } from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { ResetPasswordDto } from '@shared/service-proxies/service-proxies';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../../shared/components/validation/abp-validation.summary.component\";\nimport * as i5 from \"../../../shared/components/modal/abp-modal-header.component\";\nimport * as i6 from \"../../../shared/components/modal/abp-modal-footer.component\";\nimport * as i7 from \"@shared/pipes/localize.pipe\";\nexport var ResetPasswordDialogComponent = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(ResetPasswordDialogComponent, _AppComponentBase);\n\n  var _super = _createSuper(ResetPasswordDialogComponent);\n\n  function ResetPasswordDialogComponent(injector, _userService, bsModalRef) {\n    var _this;\n\n    _classCallCheck(this, ResetPasswordDialogComponent);\n\n    _this = _super.call(this, injector);\n    _this._userService = _userService;\n    _this.bsModalRef = bsModalRef;\n    _this.isLoading = false;\n    return _this;\n  }\n\n  _createClass(ResetPasswordDialogComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.isLoading = true;\n      this.resetPasswordDto = new ResetPasswordDto();\n      this.resetPasswordDto.userId = this.id;\n      this.resetPasswordDto.newPassword = Math.random().toString(36).substr(2, 10);\n      this.isLoading = false;\n    }\n  }, {\n    key: \"resetPassword\",\n    value: function resetPassword() {\n      var _this2 = this;\n\n      this.isLoading = true;\n\n      this._userService.resetPassword(this.resetPasswordDto).subscribe(function () {\n        _this2.notify.info('Password Reset');\n\n        _this2.bsModalRef.hide();\n      }, function () {\n        _this2.isLoading = false;\n      });\n    }\n  }]);\n\n  return ResetPasswordDialogComponent;\n}(AppComponentBase);\n\nResetPasswordDialogComponent.ɵfac = function ResetPasswordDialogComponent_Factory(t) {\n  return new (t || ResetPasswordDialogComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.UserServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalRef));\n};\n\nResetPasswordDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResetPasswordDialogComponent,\n  selectors: [[\"app-reset-password\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 31,\n  vars: 21,\n  consts: [[\"autocomplete\", \"off\", 1, \"form-horizontal\", 3, \"ngSubmit\"], [\"resetPasswordModal\", \"ngForm\"], [3, \"title\", \"onCloseClick\"], [1, \"modal-body\"], [1, \"row\"], [1, \"col-md-9\", \"offset-md-3\"], [1, \"text-info\", \"mb-1\"], [1, \"form-group\", \"row\", \"required\"], [\"for\", \"adminPassword\", 1, \"col-md-3\", \"col-form-label\"], [1, \"col-md-9\"], [\"type\", \"password\", \"id\", \"adminPassword\", \"name\", \"adminPassword\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"adminPasswordModel\", \"ngModel\", \"adminPasswordEl\", \"\"], [3, \"control\", \"controlEl\"], [1, \"form-group\", \"row\"], [\"for\", \"newPassword\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"text\", \"name\", \"NewPassword\", \"id\", \"newPassword\", \"readonly\", \"\", 1, \"form-control\", 3, \"ngModel\"], [3, \"cancelDisabled\", \"saveDisabled\", \"onCancelClick\"]],\n  template: function ResetPasswordDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function ResetPasswordDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.resetPassword();\n      });\n      i0.ɵɵelementStart(2, \"abp-modal-header\", 2);\n      i0.ɵɵlistener(\"onCloseClick\", function ResetPasswordDialogComponent_Template_abp_modal_header_onCloseClick_2_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵpipe(3, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"p\", 6);\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"localize\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"label\", 8);\n      i0.ɵɵtext(12);\n      i0.ɵɵpipe(13, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 9)(15, \"input\", 10, 11);\n      i0.ɵɵlistener(\"ngModelChange\", function ResetPasswordDialogComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.resetPasswordDto.adminPassword = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"abp-validation-summary\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 4)(20, \"div\", 5)(21, \"p\", 6);\n      i0.ɵɵtext(22);\n      i0.ɵɵpipe(23, \"localize\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"div\", 13)(25, \"label\", 14);\n      i0.ɵɵtext(26);\n      i0.ɵɵpipe(27, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 9);\n      i0.ɵɵelement(29, \"input\", 15);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"abp-modal-footer\", 16);\n      i0.ɵɵlistener(\"onCancelClick\", function ResetPasswordDialogComponent_Template_abp_modal_footer_onCancelClick_30_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      var _r0 = i0.ɵɵreference(1);\n\n      var _r1 = i0.ɵɵreference(16);\n\n      var _r2 = i0.ɵɵreference(17);\n\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(3, 11, \"ResetPassword\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 13, \"ResetPasswordStepOneInfo\"), \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 15, \"AdminPassword\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.resetPasswordDto.adminPassword);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r1)(\"controlEl\", _r2);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(23, 17, \"ResetPasswordStepTwoInfo\"), \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(27, 19, \"NewPassword\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.resetPasswordDto.newPassword);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"cancelDisabled\", ctx.isLoading)(\"saveDisabled\", !_r0.form.valid || ctx.isLoading);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i4.AbpValidationSummaryComponent, i5.AbpModalHeaderComponent, i6.AbpModalFooterComponent, i7.LocalizePipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;AAAA,SAA4BA,QAA5B,QAA4C,eAA5C;AACA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,SAEEC,gBAFF,QAGO,yCAHP;;;;;;;;;AAUA,WAAaC,4BAAb;EAAA;;EAAA;;EAME,sCACEC,QADF,EAEUC,YAFV,EAGSC,UAHT,EAG+B;IAAA;;IAAA;;IAE7B,0BAAMF,QAAN;IAHQ;IACD;IAPF,kBAAY,KAAZ;IAOwB;EAG9B;;EAZH;IAAA;IAAA,OAcE,oBAAQ;MACN,KAAKG,SAAL,GAAiB,IAAjB;MACA,KAAKC,gBAAL,GAAwB,IAAIN,gBAAJ,EAAxB;MACA,KAAKM,gBAAL,CAAsBC,MAAtB,GAA+B,KAAKC,EAApC;MACA,KAAKF,gBAAL,CAAsBG,WAAtB,GAAoCC,IAAI,CAACC,MAAL,GACjCC,QADiC,CACxB,EADwB,EAEjCC,MAFiC,CAE1B,CAF0B,EAEvB,EAFuB,CAApC;MAGA,KAAKR,SAAL,GAAiB,KAAjB;IACD;EAtBH;IAAA;IAAA,OAwBS,yBAAa;MAAA;;MAClB,KAAKA,SAAL,GAAiB,IAAjB;;MACA,KAAKF,YAAL,CAAkBW,aAAlB,CAAgC,KAAKR,gBAArC,EAAuDS,SAAvD,CACE,YAAK;QACH,MAAI,CAACC,MAAL,CAAYC,IAAZ,CAAiB,gBAAjB;;QACA,MAAI,CAACb,UAAL,CAAgBc,IAAhB;MACD,CAJH,EAKE,YAAK;QACH,MAAI,CAACb,SAAL,GAAiB,KAAjB;MACD,CAPH;IASD;EAnCH;;EAAA;AAAA,EAAkDN,gBAAlD;;;mBAAaE,8BAA4BkB;AAAA;;;QAA5BlB;EAA4BmB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZzCN;MAIEA;QAAA,OAAYO,mBAAZ;MAA2B,CAA3B;MAEAP;MAEEA;QAAA,OAAgBO,qBAAhB;MAAiC,CAAjC;;MACDP;MACDA,+BAAwB,CAAxB,EAAwB,KAAxB,EAAwB,CAAxB,EAAwB,CAAxB,EAAwB,KAAxB,EAAwB,CAAxB,EAAwB,CAAxB,EAAwB,GAAxB,EAAwB,CAAxB;MAIQA;;MACFA;MAGJA,gCAAqC,EAArC,EAAqC,OAArC,EAAqC,CAArC;MAEIA;;MACFA;MACAA,gCAAsB,EAAtB,EAAsB,OAAtB,EAAsB,EAAtB,EAAsB,EAAtB;MAOIA;QAAA;MAAA;MANFA;MAUAA;MAIFA;MAEFA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,GAAjB,EAAiB,CAAjB;MAGMA;;MACFA;MAGJA,iCAA4B,EAA5B,EAA4B,OAA5B,EAA4B,EAA5B;MAEIA;;MACFA;MACAA;MACEA;MAQFA;MAGJA;MAGEA;QAAA,OAAiBO,qBAAjB;MAAkC,CAAlC;MACDP;;;;;;;;;;MA3DCA;MAAAA;MAOMA;MAAAA;MAMFA;MAAAA;MASEA;MAAAA;MAKAA;MAAAA,8BAA8B,WAA9B,EAA8BQ,GAA9B;MAQAR;MAAAA;MAMFA;MAAAA;MASEA;MAAAA;MAMNA;MAAAA,+CAA4B,cAA5B,EAA4B,gCAA5B","names":["Injector","AppComponentBase","ResetPasswordDto","ResetPasswordDialogComponent","injector","_userService","bsModalRef","isLoading","resetPasswordDto","userId","id","newPassword","Math","random","toString","substr","resetPassword","subscribe","notify","info","hide","i0","selectors","features","decls","vars","consts","template","ctx","_r2"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/app/users/reset-password/reset-password.component.ts","/Users/selim/repo/eryaz/angular/src/app/users/reset-password/reset-password.component.html"],"sourcesContent":["import { Component, OnInit, Injector } from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport {\n  UserServiceProxy,\n  ResetPasswordDto\n} from '@shared/service-proxies/service-proxies';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\n\n@Component({\n  selector: 'app-reset-password',\n  templateUrl: './reset-password.component.html'\n})\nexport class ResetPasswordDialogComponent extends AppComponentBase\n  implements OnInit {\n  public isLoading = false;\n  public resetPasswordDto: ResetPasswordDto;\n  id: number;\n\n  constructor(\n    injector: Injector,\n    private _userService: UserServiceProxy,\n    public bsModalRef: BsModalRef\n  ) {\n    super(injector);\n  }\n\n  ngOnInit() {\n    this.isLoading = true;\n    this.resetPasswordDto = new ResetPasswordDto();\n    this.resetPasswordDto.userId = this.id;\n    this.resetPasswordDto.newPassword = Math.random()\n      .toString(36)\n      .substr(2, 10);\n    this.isLoading = false;\n  }\n\n  public resetPassword(): void {\n    this.isLoading = true;\n    this._userService.resetPassword(this.resetPasswordDto).subscribe(\n      () => {\n        this.notify.info('Password Reset');\n        this.bsModalRef.hide();\n      },\n      () => {\n        this.isLoading = false;\n      }\n    );\n  }\n}\n","<form\n  class=\"form-horizontal\"\n  autocomplete=\"off\"\n  #resetPasswordModal=\"ngForm\"\n  (ngSubmit)=\"resetPassword()\"\n>\n  <abp-modal-header\n    [title]=\"'ResetPassword' | localize\"\n    (onCloseClick)=\"bsModalRef.hide()\"\n  ></abp-modal-header>\n  <div class=\"modal-body\">\n    <div class=\"row\">\n      <div class=\"col-md-9 offset-md-3\">\n        <p class=\"text-info mb-1\">\n          {{ \"ResetPasswordStepOneInfo\" | localize }}\n        </p>\n      </div>\n    </div>\n    <div class=\"form-group row required\">\n      <label class=\"col-md-3 col-form-label\" for=\"adminPassword\">\n        {{ \"AdminPassword\" | localize }}\n      </label>\n      <div class=\"col-md-9\">\n        <input\n          type=\"password\"\n          class=\"form-control\"\n          id=\"adminPassword\"\n          name=\"adminPassword\"\n          required\n          [(ngModel)]=\"resetPasswordDto.adminPassword\"\n          #adminPasswordModel=\"ngModel\"\n          #adminPasswordEl\n        />\n        <abp-validation-summary\n          [control]=\"adminPasswordModel\"\n          [controlEl]=\"adminPasswordEl\"\n        ></abp-validation-summary>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-9 offset-md-3\">\n        <p class=\"text-info mb-1\">\n          {{ \"ResetPasswordStepTwoInfo\" | localize }}\n        </p>\n      </div>\n    </div>\n    <div class=\"form-group row\">\n      <label class=\"col-md-3 col-form-label\" for=\"newPassword\">\n        {{ \"NewPassword\" | localize }}\n      </label>\n      <div class=\"col-md-9\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          name=\"NewPassword\"\n          id=\"newPassword\"\n          readonly\n          [ngModel]=\"resetPasswordDto.newPassword\"\n        />\n      </div>\n    </div>\n  </div>\n  <abp-modal-footer\n    [cancelDisabled]=\"isLoading\"\n    [saveDisabled]=\"!resetPasswordModal.form.valid || isLoading\"\n    (onCancelClick)=\"bsModalRef.hide()\"\n  ></abp-modal-footer>\n</form>\n"]},"metadata":{},"sourceType":"module"}