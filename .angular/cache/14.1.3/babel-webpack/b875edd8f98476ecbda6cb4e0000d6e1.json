{"ast":null,"code":"import _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector, EventEmitter } from '@angular/core';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { CreateDocumentDto, CustomerDto, CustomerServiceProxy, DocumentServiceProxy } from '@shared/service-proxies/service-proxies';\nimport { ChooseCustomerDialogComponent } from './choose-customer/choose-customer-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"../documents.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../../../shared/components/validation/abp-validation.summary.component\";\nimport * as i7 from \"../../../shared/components/modal/abp-modal-header.component\";\nimport * as i8 from \"../../../shared/components/modal/abp-modal-footer.component\";\nimport * as i9 from \"@shared/pipes/localize.pipe\";\n\nfunction CreateDocumentDialogComponent_div_39_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var prop_r9 = ctx.$implicit;\n    var ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prop_r9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r8.customer[prop_r9]);\n  }\n}\n\nfunction CreateDocumentDialogComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21);\n    i0.ɵɵtemplate(2, CreateDocumentDialogComponent_div_39_div_2_Template, 5, 2, \"div\", 22);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.getCustomerProperties());\n  }\n}\n\nexport var CreateDocumentDialogComponent = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(CreateDocumentDialogComponent, _AppComponentBase);\n\n  var _super = _createSuper(CreateDocumentDialogComponent);\n\n  function CreateDocumentDialogComponent(injector, _documentService, bsModalRef, _customerService, _modalService, _documentHelperService) {\n    var _this;\n\n    _classCallCheck(this, CreateDocumentDialogComponent);\n\n    _this = _super.call(this, injector);\n    _this._documentService = _documentService;\n    _this.bsModalRef = bsModalRef;\n    _this._customerService = _customerService;\n    _this._modalService = _modalService;\n    _this._documentHelperService = _documentHelperService;\n    _this.saving = false;\n    _this.document = new CreateDocumentDto();\n    _this.documentDate = \"\";\n    _this.registrationDate = \"\";\n    _this.onSave = new EventEmitter();\n    return _this;\n  }\n\n  _createClass(CreateDocumentDialogComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this2 = this;\n\n      // onHidden veya onHide'a emitleyip subscribe olunca iki kere emit ediyor. sebebini anlamadım.\n      // this._modalService.onHidden.subscribe(customer => {\n      //     console.log(customer);\n      //     this.customer = customer;\n      // });\n      this.customerSubscription = this._documentHelperService.customerObs.subscribe(function (customer) {\n        return _this2.customer = customer;\n      });\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.customerSubscription.unsubscribe();\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      var _this3 = this;\n\n      this.saving = true;\n      this.document.documentDate = new Date(this.documentDate);\n      this.document.registrationDate = new Date(this.registrationDate);\n      this.document.customerId = this.customer.id;\n\n      this._documentService.createDocument(this.document).subscribe(function () {\n        _this3.notify.info(_this3.l('SavedSuccessfully'));\n\n        _this3.bsModalRef.hide();\n\n        _this3.onSave.emit();\n      }, function () {\n        _this3.saving = false;\n      });\n    }\n  }, {\n    key: \"chooseCustomer\",\n    value: function chooseCustomer() {\n      this.showChooseCustomerDialog();\n    }\n  }, {\n    key: \"showChooseCustomerDialog\",\n    value: function showChooseCustomerDialog() {\n      this.chooseCustomerDialog = this._modalService.show(ChooseCustomerDialogComponent, {\n        class: 'modal-lg modal-extra-lg'\n      });\n    }\n  }, {\n    key: \"getCustomerProperties\",\n    value: function getCustomerProperties() {\n      return Object.keys(this.customer);\n    }\n  }]);\n\n  return CreateDocumentDialogComponent;\n}(AppComponentBase);\n\nCreateDocumentDialogComponent.ɵfac = function CreateDocumentDialogComponent_Factory(t) {\n  return new (t || CreateDocumentDialogComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.DocumentServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalRef), i0.ɵɵdirectiveInject(i1.CustomerServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalService), i0.ɵɵdirectiveInject(i3.DocumentService));\n};\n\nCreateDocumentDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateDocumentDialogComponent,\n  selectors: [[\"ng-component\"]],\n  outputs: {\n    onSave: \"onSave\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 41,\n  vars: 28,\n  consts: [[\"autocomplete\", \"off\", 1, \"form-horizontal\", 3, \"ngSubmit\"], [\"createDocumentForm\", \"ngForm\"], [3, \"title\", \"onCloseClick\"], [1, \"modal-body\"], [1, \"form-group\", \"row\", \"required\"], [\"for\", \"documentNumber\", 1, \"col-md-3\", \"col-form-label\"], [1, \"col-md-9\"], [\"type\", \"text\", \"name\", \"documentNumber\", \"id\", \"documentNumber\", \"minlength\", \"2\", \"maxlength\", \"64\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"documentNumberModel\", \"ngModel\", \"documentNumberEl\", \"\"], [3, \"control\", \"controlEl\"], [\"for\", \"documentDate\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"text\", \"name\", \"documentDate\", \"id\", \"documentDate\", \"maxlength\", \"128\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"documentDateModel\", \"ngModel\", \"documentDateEl\", \"\"], [\"for\", \"registrationDate\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"text\", \"name\", \"registrationDate\", \"id\", \"registrationDate\", \"maxlength\", \"128\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"registrationDateModel\", \"ngModel\", \"registrationDateEl\", \"\"], [\"for\", \"customer\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"button\", 1, \"btn\", \"btn-choose-eryaz\", 3, \"click\"], [\"class\", \"customer-container\", 4, \"ngIf\"], [3, \"cancelDisabled\", \"saveDisabled\", \"onCancelClick\"], [1, \"customer-container\"], [1, \"col-md-12\"], [\"class\", \"customer-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"customer-row\"], [1, \"property-name\"], [1, \"property-value\"]],\n  template: function CreateDocumentDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function CreateDocumentDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵelementStart(2, \"abp-modal-header\", 2);\n      i0.ɵɵlistener(\"onCloseClick\", function CreateDocumentDialogComponent_Template_abp_modal_header_onCloseClick_2_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵpipe(3, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"input\", 7, 8);\n      i0.ɵɵlistener(\"ngModelChange\", function CreateDocumentDialogComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.document.documentNumber = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"abp-validation-summary\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 4)(15, \"label\", 10);\n      i0.ɵɵtext(16);\n      i0.ɵɵpipe(17, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 6)(19, \"input\", 11, 12);\n      i0.ɵɵlistener(\"ngModelChange\", function CreateDocumentDialogComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.documentDate = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"abp-validation-summary\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 4)(24, \"label\", 13);\n      i0.ɵɵtext(25);\n      i0.ɵɵpipe(26, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 6)(28, \"input\", 14, 15);\n      i0.ɵɵlistener(\"ngModelChange\", function CreateDocumentDialogComponent_Template_input_ngModelChange_28_listener($event) {\n        return ctx.registrationDate = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(31, \"abp-validation-summary\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 4)(33, \"label\", 16);\n      i0.ɵɵtext(34);\n      i0.ɵɵpipe(35, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 6)(37, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function CreateDocumentDialogComponent_Template_button_click_37_listener() {\n        return ctx.chooseCustomer();\n      });\n      i0.ɵɵtext(38);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(39, CreateDocumentDialogComponent_div_39_Template, 3, 1, \"div\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"abp-modal-footer\", 19);\n      i0.ɵɵlistener(\"onCancelClick\", function CreateDocumentDialogComponent_Template_abp_modal_footer_onCancelClick_40_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      var _r0 = i0.ɵɵreference(1);\n\n      var _r1 = i0.ɵɵreference(11);\n\n      var _r2 = i0.ɵɵreference(12);\n\n      var _r3 = i0.ɵɵreference(20);\n\n      var _r4 = i0.ɵɵreference(21);\n\n      var _r5 = i0.ɵɵreference(29);\n\n      var _r6 = i0.ɵɵreference(30);\n\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(3, 18, \"CreateNewDocument\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 20, \"Document Number\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.document.documentNumber);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r1)(\"controlEl\", _r2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(17, 22, \"Document Date\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.documentDate);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r3)(\"controlEl\", _r4);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(26, 24, \"Registration Date\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.registrationDate);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r5)(\"controlEl\", _r6);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(35, 26, \"Customer\"), \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"\", ctx.customer ? \"Change Customer\" : \"Choose Customer\", \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.customer);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"cancelDisabled\", ctx.saving)(\"saveDisabled\", !_r0.form.valid || ctx.saving);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinLengthValidator, i5.MaxLengthValidator, i5.NgModel, i5.NgForm, i6.AbpValidationSummaryComponent, i7.AbpModalHeaderComponent, i8.AbpModalFooterComponent, i9.LocalizePipe],\n  styles: [\".btn-choose-eryaz[_ngcontent-%COMP%] {\\n  background-color: rgb(29, 174, 63);\\n  color: #eee;\\n  transition: all 0.3s;\\n}\\n.btn-choose-eryaz[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.05) translateY(-3px);\\n  box-shadow: 0 3px 10px 5px rgba(0, 0, 0, 0.2);\\n}\\n.btn-choose-eryaz[_ngcontent-%COMP%]:active {\\n  transform: scale(1.05) translateY(-1px);\\n  box-shadow: 0 2px 7px 6px rgba(0, 0, 0, 0.2);\\n}\\n.customer-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  height: 30px;\\n  width: 100%;\\n}\\n.customer-container[_ngcontent-%COMP%] {\\n  background-image: linear-gradient(to bottom right, rgba(26, 178, 195, 0.3), rgba(18, 140, 154, 0.3));\\n  border-radius: 3px;\\n}\\n.property-name[_ngcontent-%COMP%] {\\n  padding-left: 20px;\\n}\\n.property-value[_ngcontent-%COMP%] {\\n  padding-right: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1kb2N1bWVudC1kaWFsb2cuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQ0FBQTtFQUNBLFdBQUE7RUFFQSxvQkFBQTtBQUFKO0FBRUk7RUFDSSx1Q0FBQTtFQUNBLDZDQUFBO0FBQVI7QUFHSTtFQUNJLHVDQUFBO0VBQ0EsNENBQUE7QUFEUjtBQUtBO0VBQ0ksYUFBQTtFQUNBLDhCQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7QUFGSjtBQUtBO0VBQ0ksb0dBQUE7RUFDQSxrQkFBQTtBQUZKO0FBS0E7RUFDSSxrQkFBQTtBQUZKO0FBS0E7RUFDSSxtQkFBQTtBQUZKIiwiZmlsZSI6ImNyZWF0ZS1kb2N1bWVudC1kaWFsb2cuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLWNob29zZS1lcnlheiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI5LCAxNzQsIDYzKTtcbiAgICBjb2xvcjogI2VlZTtcblxuICAgIHRyYW5zaXRpb246IGFsbCAuM3M7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KSB0cmFuc2xhdGVZKC0zcHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDNweCAxMHB4IDVweCByZ2JhKCRjb2xvcjogIzAwMDAwMCwgJGFscGhhOiAuMik7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpIHRyYW5zbGF0ZVkoLTFweCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDdweCA2cHggcmdiYSgkY29sb3I6ICMwMDAwMDAsICRhbHBoYTogLjIpO1xuICAgIH1cbn1cblxuLmN1c3RvbWVyLXJvdyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4uY3VzdG9tZXItY29udGFpbmVyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tIHJpZ2h0LCByZ2JhKDI2LCAxNzgsIDE5NSwgLjMpLCByZ2JhKDE4LCAxNDAsIDE1NCwgMC4zKSk7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xufVxuXG4ucHJvcGVydHktbmFtZSB7XG4gICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xufVxuXG4ucHJvcGVydHktdmFsdWUge1xuICAgIHBhZGRpbmctcmlnaHQ6IDIwcHg7XG59Il19 */\"]\n});","map":{"version":3,"mappings":"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","names":["Injector","EventEmitter","AppComponentBase","CreateDocumentDto","CustomerDto","CustomerServiceProxy","DocumentServiceProxy","ChooseCustomerDialogComponent","i0","CreateDocumentDialogComponent","injector","_documentService","bsModalRef","_customerService","_modalService","_documentHelperService","customerSubscription","customerObs","subscribe","customer","unsubscribe","saving","document","documentDate","Date","registrationDate","customerId","id","createDocument","notify","info","l","hide","onSave","emit","showChooseCustomerDialog","chooseCustomerDialog","show","class","Object","keys","selectors","outputs","features","decls","vars","consts","template","ctx","_r2","_r4","_r6"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/app/documents/create-document/create-document-dialog.component.ts","/Users/selim/repo/eryaz/angular/src/app/documents/create-document/create-document-dialog.component.html"],"sourcesContent":["import {\n    Component,\n    Injector,\n    OnInit,\n    Output,\n    EventEmitter,\n    OnDestroy\n} from '@angular/core';\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport {\n    CreateDocumentDto,\n    CustomerDto,\n    CustomerDtoPagedResultDto,\n    CustomerServiceProxy,\n    DocumentServiceProxy,\n} from '@shared/service-proxies/service-proxies';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { threadId } from 'worker_threads';\nimport { PagedRequestDto } from '@shared/paged-listing-component-base';\nimport { finalize } from 'rxjs/operators';\nimport { ChooseCustomerDialogComponent } from './choose-customer/choose-customer-dialog.component';\nimport { DocumentService } from '../documents.service';\nimport { Subscription } from 'rxjs';\n\n@Component({\n    templateUrl: 'create-document-dialog.component.html',\n    styleUrls: ['create-document-dialog.component.scss']\n})\nexport class CreateDocumentDialogComponent extends AppComponentBase\n    implements OnInit, OnDestroy {\n    saving = false;\n    document: CreateDocumentDto = new CreateDocumentDto();\n    documentDate: string = \"\";\n    registrationDate: string = \"\";\n    customer: CustomerDto;\n    chooseCustomerDialog: BsModalRef;\n    @Output() onSave = new EventEmitter<any>();\n    customerSubscription: Subscription;\n\n    constructor(\n        injector: Injector,\n        public _documentService: DocumentServiceProxy,\n        public bsModalRef: BsModalRef,\n        public _customerService: CustomerServiceProxy,\n        public _modalService: BsModalService,\n        private _documentHelperService: DocumentService\n    ) {\n        super(injector);\n    }\n\n    ngOnInit(): void {\n        // onHidden veya onHide'a emitleyip subscribe olunca iki kere emit ediyor. sebebini anlamadım.\n        // this._modalService.onHidden.subscribe(customer => {\n        //     console.log(customer);\n        //     this.customer = customer;\n        // });\n        this.customerSubscription = this._documentHelperService.customerObs.subscribe(customer =>\n            this.customer = customer);\n    }\n\n    ngOnDestroy(): void {\n        this.customerSubscription.unsubscribe();\n    }\n\n    save(): void {\n        this.saving = true;\n        this.document.documentDate = new Date(this.documentDate);\n        this.document.registrationDate = new Date(this.registrationDate);\n        this.document.customerId = this.customer.id;\n        this._documentService.createDocument(this.document).subscribe(\n            () => {\n                this.notify.info(this.l('SavedSuccessfully'));\n                this.bsModalRef.hide();\n                this.onSave.emit();\n            },\n            () => {\n                this.saving = false;\n            }\n        );\n    }\n\n    chooseCustomer(): void {\n        this.showChooseCustomerDialog();\n    }\n\n    showChooseCustomerDialog(): void {\n        this.chooseCustomerDialog = this._modalService.show(\n            ChooseCustomerDialogComponent,\n            {\n                class: 'modal-lg modal-extra-lg',\n            }\n        );\n    }\n\n    getCustomerProperties() {\n        return Object.keys(this.customer);\n    }\n}\n","<form class=\"form-horizontal\" autocomplete=\"off\" #createDocumentForm=\"ngForm\" (ngSubmit)=\"save()\">\n    <abp-modal-header [title]=\"'CreateNewDocument' | localize\" (onCloseClick)=\"bsModalRef.hide()\"></abp-modal-header>\n    <div class=\"modal-body\">\n        <div class=\"form-group row required\">\n            <label class=\"col-md-3 col-form-label\" for=\"documentNumber\">\n                {{ \"Document Number\" | localize }}\n            </label>\n            <div class=\"col-md-9\">\n                <input type=\"text\" class=\"form-control\" name=\"documentNumber\" id=\"documentNumber\" minlength=\"2\"\n                    maxlength=\"64\" required [(ngModel)]=\"document.documentNumber\" #documentNumberModel=\"ngModel\"\n                    #documentNumberEl />\n                <abp-validation-summary [control]=\"documentNumberModel\" [controlEl]=\"documentNumberEl\">\n                </abp-validation-summary>\n            </div>\n        </div>\n        <div class=\"form-group row required\">\n            <label class=\"col-md-3 col-form-label\" for=\"documentDate\">\n                {{ \"Document Date\" | localize }}\n            </label>\n            <div class=\"col-md-9\">\n                <input type=\"text\" class=\"form-control\" name=\"documentDate\" id=\"documentDate\" maxlength=\"128\" required\n                    [(ngModel)]=\"documentDate\" #documentDateModel=\"ngModel\" #documentDateEl />\n                <abp-validation-summary [control]=\"documentDateModel\" [controlEl]=\"documentDateEl\">\n                </abp-validation-summary>\n            </div>\n        </div>\n        <div class=\"form-group row required\">\n            <label class=\"col-md-3 col-form-label\" for=\"registrationDate\">\n                {{ \"Registration Date\" | localize }}\n            </label>\n            <div class=\"col-md-9\">\n                <input type=\"text\" class=\"form-control\" name=\"registrationDate\" id=\"registrationDate\" maxlength=\"128\"\n                    required [(ngModel)]=\"registrationDate\" #registrationDateModel=\"ngModel\" #registrationDateEl />\n                <abp-validation-summary [control]=\"registrationDateModel\" [controlEl]=\"registrationDateEl\">\n                </abp-validation-summary>\n            </div>\n        </div>\n        <!-- Yeni evrak ekranında müşteri seçme alanı -->\n\n        <div class=\"form-group row required\">\n            <label class=\"col-md-3 col-form-label\" for=\"customer\">\n                {{ \"Customer\" | localize }}\n            </label>\n            <div class=\"col-md-9\">\n                <button type=\"button\" class=\"btn btn-choose-eryaz\" (click)=\"chooseCustomer()\">{{customer ?\n                    'Change Customer': 'Choose Customer'}}\n                </button>\n            </div>\n        </div>\n\n        <!-- Müşteri seçildiyse listele -->\n        <div *ngIf=\"customer\" class=\"customer-container\">\n            <div class=\"col-md-12\">\n                <div *ngFor=\"let prop of getCustomerProperties()\" class=\"customer-row\">\n                    <div class=\"property-name\">{{ prop }}</div>\n                    <div class=\"property-value\">{{ customer[prop] }}</div>\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n    <abp-modal-footer [cancelDisabled]=\"saving\" [saveDisabled]=\"!createDocumentForm.form.valid || saving\"\n        (onCancelClick)=\"bsModalRef.hide()\"></abp-modal-footer>\n</form>"]},"metadata":{},"sourceType":"module"}