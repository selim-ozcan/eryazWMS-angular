{"ast":null,"code":"import _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport { AppComponentBase } from 'shared/app-component-base';\nimport { Injector } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport var PagedResultDto = /*#__PURE__*/_createClass(function PagedResultDto() {\n  _classCallCheck(this, PagedResultDto);\n});\nexport var EntityDto = /*#__PURE__*/_createClass(function EntityDto() {\n  _classCallCheck(this, EntityDto);\n});\nexport var PagedRequestDto = /*#__PURE__*/_createClass(function PagedRequestDto() {\n  _classCallCheck(this, PagedRequestDto);\n});\nexport var PagedListingComponentBase = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(PagedListingComponentBase, _AppComponentBase);\n\n  var _super = _createSuper(PagedListingComponentBase);\n\n  function PagedListingComponentBase(injector) {\n    var _this;\n\n    _classCallCheck(this, PagedListingComponentBase);\n\n    _this = _super.call(this, injector);\n    _this.pageSize = 5;\n    _this.pageNumber = 1;\n    _this.totalPages = 1;\n    _this.isTableLoading = false;\n    return _this;\n  }\n\n  _createClass(PagedListingComponentBase, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.refresh();\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.getDataPage(this.pageNumber);\n    }\n  }, {\n    key: \"showPaging\",\n    value: function showPaging(result, pageNumber) {\n      this.totalPages = (result.totalCount - result.totalCount % this.pageSize) / this.pageSize + 1;\n      this.totalItems = result.totalCount;\n      this.pageNumber = pageNumber;\n    }\n  }, {\n    key: \"getDataPage\",\n    value: function getDataPage(page) {\n      var _this2 = this;\n\n      var req = new PagedRequestDto();\n      req.maxResultCount = this.pageSize;\n      req.skipCount = (page - 1) * this.pageSize;\n      this.isTableLoading = true;\n      this.list(req, page, function () {\n        _this2.isTableLoading = false;\n      });\n    }\n  }]);\n\n  return PagedListingComponentBase;\n}(AppComponentBase);\n\nPagedListingComponentBase.ɵfac = function PagedListingComponentBase_Factory(t) {\n  return new (t || PagedListingComponentBase)(i0.ɵɵdirectiveInject(i0.Injector));\n};\n\nPagedListingComponentBase.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PagedListingComponentBase,\n  selectors: [[\"ng-component\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function PagedListingComponentBase_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;AAAA,SAASA,gBAAT,QAAiC,2BAAjC;AACA,SAAoBC,QAApB,QAA4C,eAA5C;;AAEA,WAAaC,cAAb;EAAA;AAAA;AAKA,WAAaC,SAAb;EAAA;AAAA;AAIA,WAAaC,eAAb;EAAA;AAAA;AAQA,WAAsBC,yBAAtB;EAAA;;EAAA;;EASI,mCAAYC,QAAZ,EAA8B;IAAA;;IAAA;;IAC1B,0BAAMA,QAAN;IARG,iBAAW,CAAX;IAEA,mBAAa,CAAb;IACA,mBAAa,CAAb;IAEA,uBAAiB,KAAjB;IAEuB;EAE7B;;EAXL;IAAA;IAAA,OAaI,oBAAQ;MACJ,KAAKC,OAAL;IACH;EAfL;IAAA;IAAA,OAiBI,mBAAO;MACH,KAAKC,WAAL,CAAiB,KAAKC,UAAtB;IACH;EAnBL;IAAA;IAAA,OAqBW,oBAAWC,MAAX,EAAmCD,UAAnC,EAAqD;MACxD,KAAKE,UAAL,GAAmB,CAACD,MAAM,CAACE,UAAP,GAAqBF,MAAM,CAACE,UAAP,GAAoB,KAAKC,QAA/C,IAA4D,KAAKA,QAAlE,GAA8E,CAAhG;MAEA,KAAKC,UAAL,GAAkBJ,MAAM,CAACE,UAAzB;MACA,KAAKH,UAAL,GAAkBA,UAAlB;IACH;EA1BL;IAAA;IAAA,OA4BW,qBAAYM,IAAZ,EAAwB;MAAA;;MAC3B,IAAMC,GAAG,GAAG,IAAIZ,eAAJ,EAAZ;MACAY,GAAG,CAACC,cAAJ,GAAqB,KAAKJ,QAA1B;MACAG,GAAG,CAACE,SAAJ,GAAgB,CAACH,IAAI,GAAG,CAAR,IAAa,KAAKF,QAAlC;MAEA,KAAKM,cAAL,GAAsB,IAAtB;MACA,KAAKC,IAAL,CAAUJ,GAAV,EAAeD,IAAf,EAAqB,YAAK;QACtB,MAAI,CAACI,cAAL,GAAsB,KAAtB;MACH,CAFD;IAGH;EArCL;;EAAA;AAAA,EAAoEnB,gBAApE;;;mBAAsBK,2BAAyBgB;AAAA;;;QAAzBhB;EAAyBiB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC","names":["AppComponentBase","Injector","PagedResultDto","EntityDto","PagedRequestDto","PagedListingComponentBase","injector","refresh","getDataPage","pageNumber","result","totalPages","totalCount","pageSize","totalItems","page","req","maxResultCount","skipCount","isTableLoading","list","i0","selectors","features","decls","vars","template","encapsulation"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/shared/paged-listing-component-base.ts"],"sourcesContent":["import { AppComponentBase } from 'shared/app-component-base';\nimport { Component, Injector, OnInit } from '@angular/core';\n\nexport class PagedResultDto {\n    items: any[];\n    totalCount: number;\n}\n\nexport class EntityDto {\n    id: number;\n}\n\nexport class PagedRequestDto {\n    skipCount: number;\n    maxResultCount: number;\n}\n\n@Component({\n    template: ''\n})\nexport abstract class PagedListingComponentBase<TEntityDto> extends AppComponentBase implements OnInit {\n\n    public pageSize = 5;\n\n    public pageNumber = 1;\n    public totalPages = 1;\n    public totalItems: number;\n    public isTableLoading = false;\n\n    constructor(injector: Injector) {\n        super(injector);\n    }\n\n    ngOnInit(): void {\n        this.refresh();\n    }\n\n    refresh(): void {\n        this.getDataPage(this.pageNumber);\n    }\n\n    public showPaging(result: PagedResultDto, pageNumber: number): void {\n        this.totalPages = ((result.totalCount - (result.totalCount % this.pageSize)) / this.pageSize) + 1;\n\n        this.totalItems = result.totalCount;\n        this.pageNumber = pageNumber;\n    }\n\n    public getDataPage(page: number): void {\n        const req = new PagedRequestDto();\n        req.maxResultCount = this.pageSize;\n        req.skipCount = (page - 1) * this.pageSize;\n\n        this.isTableLoading = true;\n        this.list(req, page, () => {\n            this.isTableLoading = false;\n        });\n    }\n\n    protected abstract list(request: PagedRequestDto, pageNumber: number, finishedCallback: Function): void;\n    protected abstract delete(entity: TEntityDto): void;\n}\n"]},"metadata":{},"sourceType":"module"}