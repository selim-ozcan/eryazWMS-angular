{"ast":null,"code":"import _classCallCheck from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/selim/repo/eryaz/angular/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Injector, EventEmitter } from '@angular/core';\nimport { forEach as _forEach, includes as _includes, map as _map } from 'lodash-es';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport { UserDto } from '@shared/service-proxies/service-proxies';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared/service-proxies/service-proxies\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ngx-bootstrap/tabs\";\nimport * as i6 from \"../../../shared/components/validation/abp-validation.summary.component\";\nimport * as i7 from \"../../../shared/components/modal/abp-modal-header.component\";\nimport * as i8 from \"../../../shared/components/modal/abp-modal-footer.component\";\nimport * as i9 from \"@shared/pipes/localize.pipe\";\n\nfunction EditUserDialogComponent_ng_container_55_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 27)(2, \"div\", 22)(3, \"input\", 28);\n    i0.ɵɵlistener(\"change\", function EditUserDialogComponent_ng_container_55_Template_input_change_3_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r13);\n      var role_r10 = restoredCtx.$implicit;\n      var ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onRoleChange(role_r10, $event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var role_r10 = ctx.$implicit;\n    var i_r11 = ctx.index;\n    var ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"id\", \"role_\" + i_r11)(\"checked\", ctx_r9.isRoleChecked(role_r10.normalizedName));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", \"role_\" + i_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", role_r10.name, \" \");\n  }\n}\n\nexport var EditUserDialogComponent = /*#__PURE__*/function (_AppComponentBase) {\n  _inherits(EditUserDialogComponent, _AppComponentBase);\n\n  var _super = _createSuper(EditUserDialogComponent);\n\n  function EditUserDialogComponent(injector, _userService, bsModalRef) {\n    var _this;\n\n    _classCallCheck(this, EditUserDialogComponent);\n\n    _this = _super.call(this, injector);\n    _this._userService = _userService;\n    _this.bsModalRef = bsModalRef;\n    _this.saving = false;\n    _this.user = new UserDto();\n    _this.roles = [];\n    _this.checkedRolesMap = {};\n    _this.onSave = new EventEmitter();\n    return _this;\n  }\n\n  _createClass(EditUserDialogComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this2 = this;\n\n      this._userService.get(this.id).subscribe(function (result) {\n        _this2.user = result;\n\n        _this2._userService.getRoles().subscribe(function (result2) {\n          _this2.roles = result2.items;\n\n          _this2.setInitialRolesStatus();\n        });\n      });\n    }\n  }, {\n    key: \"setInitialRolesStatus\",\n    value: function setInitialRolesStatus() {\n      var _this3 = this;\n\n      _map(this.roles, function (item) {\n        _this3.checkedRolesMap[item.normalizedName] = _this3.isRoleChecked(item.normalizedName);\n      });\n    }\n  }, {\n    key: \"isRoleChecked\",\n    value: function isRoleChecked(normalizedName) {\n      return _includes(this.user.roleNames, normalizedName);\n    }\n  }, {\n    key: \"onRoleChange\",\n    value: function onRoleChange(role, $event) {\n      this.checkedRolesMap[role.normalizedName] = $event.target.checked;\n    }\n  }, {\n    key: \"getCheckedRoles\",\n    value: function getCheckedRoles() {\n      var roles = [];\n\n      _forEach(this.checkedRolesMap, function (value, key) {\n        if (value) {\n          roles.push(key);\n        }\n      });\n\n      return roles;\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      var _this4 = this;\n\n      this.saving = true;\n      this.user.roleNames = this.getCheckedRoles();\n\n      this._userService.update(this.user).subscribe(function () {\n        _this4.notify.info(_this4.l('SavedSuccessfully'));\n\n        _this4.bsModalRef.hide();\n\n        _this4.onSave.emit();\n      }, function () {\n        _this4.saving = false;\n      });\n    }\n  }]);\n\n  return EditUserDialogComponent;\n}(AppComponentBase);\n\nEditUserDialogComponent.ɵfac = function EditUserDialogComponent_Factory(t) {\n  return new (t || EditUserDialogComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.UserServiceProxy), i0.ɵɵdirectiveInject(i2.BsModalRef));\n};\n\nEditUserDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditUserDialogComponent,\n  selectors: [[\"ng-component\"]],\n  outputs: {\n    onSave: \"onSave\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 57,\n  vars: 40,\n  consts: [[\"autocomplete\", \"off\", 1, \"form-horizontal\", 3, \"ngSubmit\"], [\"editUserModal\", \"ngForm\"], [3, \"title\", \"onCloseClick\"], [1, \"modal-body\"], [1, \"pt-3\", \"px-2\", 3, \"heading\"], [1, \"form-group\", \"row\", \"required\"], [\"for\", \"name\", 1, \"col-md-3\", \"col-form-label\"], [1, \"col-md-9\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"required\", \"\", \"maxlength\", \"32\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"nameModel\", \"ngModel\", \"nameEl\", \"\"], [3, \"control\", \"controlEl\"], [\"for\", \"surname\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"text\", \"name\", \"surname\", \"id\", \"surname\", \"required\", \"\", \"maxlength\", \"32\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"surnameModel\", \"ngModel\", \"surnameEl\", \"\"], [\"for\", \"userName\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"text\", \"name\", \"userName\", \"id\", \"userName\", \"required\", \"\", \"minlength\", \"2\", \"maxlength\", \"32\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"userNameModel\", \"ngModel\", \"userNameEl\", \"\"], [\"for\", \"emailAddress\", 1, \"col-md-3\", \"col-form-label\"], [\"type\", \"email\", \"name\", \"emailAddress\", \"id\", \"emailAddress\", \"required\", \"\", \"maxlength\", \"256\", \"pattern\", \"^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{1,})+$\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"emailAddressModel\", \"ngModel\", \"emailAddressEl\", \"\"], [1, \"form-group\", \"row\", \"mb-0\"], [1, \"col-md-3\", \"col-form-label\"], [1, \"custom-control\", \"custom-checkbox\"], [\"type\", \"checkbox\", \"name\", \"isActive\", \"id\", \"isActive\", 1, \"custom-control-input\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"isActive\", 1, \"custom-control-label\", \"mt-2\"], [4, \"ngFor\", \"ngForOf\"], [3, \"cancelDisabled\", \"saveDisabled\", \"onCancelClick\"], [1, \"col-md-6\"], [\"type\", \"checkbox\", 1, \"custom-control-input\", 3, \"id\", \"checked\", \"change\"], [1, \"custom-control-label\", 3, \"for\"]],\n  template: function EditUserDialogComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function EditUserDialogComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵelementStart(2, \"abp-modal-header\", 2);\n      i0.ɵɵlistener(\"onCloseClick\", function EditUserDialogComponent_Template_abp_modal_header_onCloseClick_2_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵpipe(3, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"tabset\")(6, \"tab\", 4);\n      i0.ɵɵpipe(7, \"localize\");\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"label\", 6);\n      i0.ɵɵtext(10);\n      i0.ɵɵpipe(11, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 7)(13, \"input\", 8, 9);\n      i0.ɵɵlistener(\"ngModelChange\", function EditUserDialogComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.user.name = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"abp-validation-summary\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 5)(18, \"label\", 11);\n      i0.ɵɵtext(19);\n      i0.ɵɵpipe(20, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 7)(22, \"input\", 12, 13);\n      i0.ɵɵlistener(\"ngModelChange\", function EditUserDialogComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.user.surname = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"abp-validation-summary\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 5)(27, \"label\", 14);\n      i0.ɵɵtext(28);\n      i0.ɵɵpipe(29, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 7)(31, \"input\", 15, 16);\n      i0.ɵɵlistener(\"ngModelChange\", function EditUserDialogComponent_Template_input_ngModelChange_31_listener($event) {\n        return ctx.user.userName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"abp-validation-summary\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 5)(36, \"label\", 17);\n      i0.ɵɵtext(37);\n      i0.ɵɵpipe(38, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"div\", 7)(40, \"input\", 18, 19);\n      i0.ɵɵlistener(\"ngModelChange\", function EditUserDialogComponent_Template_input_ngModelChange_40_listener($event) {\n        return ctx.user.emailAddress = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(43, \"abp-validation-summary\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 20)(45, \"label\", 21);\n      i0.ɵɵtext(46);\n      i0.ɵɵpipe(47, \"localize\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"div\", 7)(49, \"div\", 22)(50, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function EditUserDialogComponent_Template_input_ngModelChange_50_listener($event) {\n        return ctx.user.isActive = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(51, \"label\", 24);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(52, \"tab\", 4);\n      i0.ɵɵpipe(53, \"localize\");\n      i0.ɵɵelementStart(54, \"div\", 20);\n      i0.ɵɵtemplate(55, EditUserDialogComponent_ng_container_55_Template, 6, 4, \"ng-container\", 25);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(56, \"abp-modal-footer\", 26);\n      i0.ɵɵlistener(\"onCancelClick\", function EditUserDialogComponent_Template_abp_modal_footer_onCancelClick_56_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      var _r0 = i0.ɵɵreference(1);\n\n      var _r1 = i0.ɵɵreference(14);\n\n      var _r2 = i0.ɵɵreference(15);\n\n      var _r3 = i0.ɵɵreference(23);\n\n      var _r4 = i0.ɵɵreference(24);\n\n      var _r5 = i0.ɵɵreference(32);\n\n      var _r6 = i0.ɵɵreference(33);\n\n      var _r7 = i0.ɵɵreference(41);\n\n      var _r8 = i0.ɵɵreference(42);\n\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(3, 24, \"EditUser\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"heading\", i0.ɵɵpipeBind1(7, 26, \"UserDetails\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(11, 28, \"Name\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.name);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r1)(\"controlEl\", _r2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(20, 30, \"Surname\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.surname);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r3)(\"controlEl\", _r4);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(29, 32, \"UserName\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.userName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r5)(\"controlEl\", _r6);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(38, 34, \"EmailAddress\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.emailAddress);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", _r7)(\"controlEl\", _r8);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(47, 36, \"IsActive\"), \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.user.isActive);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"heading\", i0.ɵɵpipeBind1(53, 38, \"UserRoles\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.roles);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"cancelDisabled\", ctx.saving)(\"saveDisabled\", !_r0.form.valid || ctx.saving);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.MaxLengthValidator, i4.PatternValidator, i4.NgModel, i4.NgForm, i5.TabDirective, i5.TabsetComponent, i6.AbpValidationSummaryComponent, i7.AbpModalHeaderComponent, i8.AbpModalFooterComponent, i9.LocalizePipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["Injector","EventEmitter","forEach","_forEach","includes","_includes","map","_map","AppComponentBase","UserDto","i0","ctx_r9","EditUserDialogComponent","injector","_userService","bsModalRef","get","id","subscribe","result","user","getRoles","result2","roles","items","setInitialRolesStatus","item","checkedRolesMap","normalizedName","isRoleChecked","roleNames","role","$event","target","checked","value","key","push","saving","getCheckedRoles","update","notify","info","l","hide","onSave","emit","selectors","outputs","features","decls","vars","consts","template","ctx","_r2","_r4","_r6","_r8"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/app/users/edit-user/edit-user-dialog.component.ts","/Users/selim/repo/eryaz/angular/src/app/users/edit-user/edit-user-dialog.component.html"],"sourcesContent":["import {\n  Component,\n  Injector,\n  OnInit,\n  EventEmitter,\n  Output\n} from '@angular/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { forEach as _forEach, includes as _includes, map as _map } from 'lodash-es';\nimport { AppComponentBase } from '@shared/app-component-base';\nimport {\n  UserServiceProxy,\n  UserDto,\n  RoleDto\n} from '@shared/service-proxies/service-proxies';\n\n@Component({\n  templateUrl: './edit-user-dialog.component.html'\n})\nexport class EditUserDialogComponent extends AppComponentBase\n  implements OnInit {\n  saving = false;\n  user = new UserDto();\n  roles: RoleDto[] = [];\n  checkedRolesMap: { [key: string]: boolean } = {};\n  id: number;\n\n  @Output() onSave = new EventEmitter<any>();\n\n  constructor(\n    injector: Injector,\n    public _userService: UserServiceProxy,\n    public bsModalRef: BsModalRef\n  ) {\n    super(injector);\n  }\n\n  ngOnInit(): void {\n    this._userService.get(this.id).subscribe((result) => {\n      this.user = result;\n\n      this._userService.getRoles().subscribe((result2) => {\n        this.roles = result2.items;\n        this.setInitialRolesStatus();\n      });\n    });\n  }\n\n  setInitialRolesStatus(): void {\n    _map(this.roles, (item) => {\n      this.checkedRolesMap[item.normalizedName] = this.isRoleChecked(\n        item.normalizedName\n      );\n    });\n  }\n\n  isRoleChecked(normalizedName: string): boolean {\n    return _includes(this.user.roleNames, normalizedName);\n  }\n\n  onRoleChange(role: RoleDto, $event) {\n    this.checkedRolesMap[role.normalizedName] = $event.target.checked;\n  }\n\n  getCheckedRoles(): string[] {\n    const roles: string[] = [];\n    _forEach(this.checkedRolesMap, function (value, key) {\n      if (value) {\n        roles.push(key);\n      }\n    });\n    return roles;\n  }\n\n  save(): void {\n    this.saving = true;\n\n    this.user.roleNames = this.getCheckedRoles();\n\n    this._userService.update(this.user).subscribe(\n      () => {\n        this.notify.info(this.l('SavedSuccessfully'));\n        this.bsModalRef.hide();\n        this.onSave.emit();\n      },\n      () => {\n        this.saving = false;\n      }\n    );\n  }\n}\n","<form\n  class=\"form-horizontal\"\n  autocomplete=\"off\"\n  #editUserModal=\"ngForm\"\n  (ngSubmit)=\"save()\"\n>\n  <abp-modal-header\n    [title]=\"'EditUser' | localize\"\n    (onCloseClick)=\"bsModalRef.hide()\"\n  ></abp-modal-header>\n  <div class=\"modal-body\">\n    <tabset>\n      <tab [heading]=\"'UserDetails' | localize\" class=\"pt-3 px-2\">\n        <div class=\"form-group row required\">\n          <label class=\"col-md-3 col-form-label\" for=\"name\">\n            {{ \"Name\" | localize }}\n          </label>\n          <div class=\"col-md-9\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              name=\"name\"\n              id=\"name\"\n              required\n              maxlength=\"32\"\n              [(ngModel)]=\"user.name\"\n              #nameModel=\"ngModel\"\n              #nameEl\n            />\n            <abp-validation-summary\n              [control]=\"nameModel\"\n              [controlEl]=\"nameEl\"\n            ></abp-validation-summary>\n          </div>\n        </div>\n        <div class=\"form-group row required\">\n          <label class=\"col-md-3 col-form-label\" for=\"surname\">\n            {{ \"Surname\" | localize }}\n          </label>\n          <div class=\"col-md-9\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              name=\"surname\"\n              id=\"surname\"\n              required\n              maxlength=\"32\"\n              [(ngModel)]=\"user.surname\"\n              #surnameModel=\"ngModel\"\n              #surnameEl\n            />\n            <abp-validation-summary\n              [control]=\"surnameModel\"\n              [controlEl]=\"surnameEl\"\n            ></abp-validation-summary>\n          </div>\n        </div>\n        <div class=\"form-group row required\">\n          <label class=\"col-md-3 col-form-label\" for=\"userName\">\n            {{ \"UserName\" | localize }}\n          </label>\n          <div class=\"col-md-9\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              name=\"userName\"\n              id=\"userName\"\n              required\n              minlength=\"2\"\n              maxlength=\"32\"\n              [(ngModel)]=\"user.userName\"\n              #userNameModel=\"ngModel\"\n              #userNameEl\n            />\n            <abp-validation-summary\n              [control]=\"userNameModel\"\n              [controlEl]=\"userNameEl\"\n            ></abp-validation-summary>\n          </div>\n        </div>\n        <div class=\"form-group row required\">\n          <label class=\"col-md-3 col-form-label\" for=\"emailAddress\">\n            {{ \"EmailAddress\" | localize }}\n          </label>\n          <div class=\"col-md-9\">\n            <input\n              type=\"email\"\n              class=\"form-control\"\n              name=\"emailAddress\"\n              id=\"emailAddress\"\n              required\n              maxlength=\"256\"\n              pattern=\"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{1,})+$\"\n              [(ngModel)]=\"user.emailAddress\"\n              #emailAddressModel=\"ngModel\"\n              #emailAddressEl\n            />\n            <abp-validation-summary\n              [control]=\"emailAddressModel\"\n              [controlEl]=\"emailAddressEl\"\n            ></abp-validation-summary>\n          </div>\n        </div>\n        <div class=\"form-group row mb-0\">\n          <label class=\"col-md-3 col-form-label\">\n            {{ \"IsActive\" | localize }}\n          </label>\n          <div class=\"col-md-9\">\n            <div class=\"custom-control custom-checkbox\">\n              <input\n                type=\"checkbox\"\n                class=\"custom-control-input\"\n                name=\"isActive\"\n                id=\"isActive\"\n                [(ngModel)]=\"user.isActive\"\n              />\n              <label class=\"custom-control-label mt-2\" for=\"isActive\"></label>\n            </div>\n          </div>\n        </div>\n      </tab>\n      <tab [heading]=\"'UserRoles' | localize\" class=\"pt-3 px-2\">\n        <div class=\"form-group row mb-0\">\n          <ng-container *ngFor=\"let role of roles; let i = index\">\n            <div class=\"col-md-6\">\n              <div class=\"custom-control custom-checkbox\">\n                <input\n                  type=\"checkbox\"\n                  class=\"custom-control-input\"\n                  [id]=\"'role_' + i\"\n                  [checked]=\"isRoleChecked(role.normalizedName)\"\n                  (change)=\"onRoleChange(role, $event)\"\n                />\n                <label class=\"custom-control-label\" [for]=\"'role_' + i\">\n                  {{ role.name }}\n                </label>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </tab>\n    </tabset>\n  </div>\n  <abp-modal-footer\n    [cancelDisabled]=\"saving\"\n    [saveDisabled]=\"!editUserModal.form.valid || saving\"\n    (onCancelClick)=\"bsModalRef.hide()\"\n  ></abp-modal-footer>\n</form>\n"]},"metadata":{},"sourceType":"module"}