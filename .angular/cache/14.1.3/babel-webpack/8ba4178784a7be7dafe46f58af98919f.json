{"ast":null,"code":"import { ApplicationRef } from '@angular/core';\nimport { createNewHosts } from '@angularclass/hmr';\nexport var hmrBootstrap = function hmrBootstrap(module, bootstrap) {\n  var ngModule;\n  module.hot.accept();\n  bootstrap().then(function (mod) {\n    return ngModule = mod;\n  });\n  module.hot.dispose(function () {\n    var appRef = ngModule.injector.get(ApplicationRef);\n    var elements = appRef.components.map(function (c) {\n      return c.location.nativeElement;\n    });\n    var makeVisible = createNewHosts(elements);\n    ngModule.destroy();\n    makeVisible();\n  });\n};","map":{"version":3,"mappings":"AAAA,SAAsBA,cAAtB,QAA4C,eAA5C;AACA,SAASC,cAAT,QAA+B,mBAA/B;AAEA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAAcC,SAAd,EAA4D;EACpF,IAAIC,QAAJ;EACAF,MAAM,CAACG,GAAP,CAAWC,MAAX;EACAH,SAAS,GAAGI,IAAZ,CAAiB,aAAG;IAAA,OAAIH,QAAQ,GAAGI,GAAf;EAAA,CAApB;EACAN,MAAM,CAACG,GAAP,CAAWI,OAAX,CAAmB,YAAK;IACpB,IAAMC,MAAM,GAAmBN,QAAQ,CAACO,QAAT,CAAkBC,GAAlB,CAAsBb,cAAtB,CAA/B;IACA,IAAMc,QAAQ,GAAGH,MAAM,CAACI,UAAP,CAAkBC,GAAlB,CAAsB,WAAC;MAAA,OAAIC,CAAC,CAACC,QAAF,CAAWC,aAAf;IAAA,CAAvB,CAAjB;IACA,IAAMC,WAAW,GAAGnB,cAAc,CAACa,QAAD,CAAlC;IACAT,QAAQ,CAACgB,OAAT;IACAD,WAAW;EACd,CAND;AAOH,CAXM","names":["ApplicationRef","createNewHosts","hmrBootstrap","module","bootstrap","ngModule","hot","accept","then","mod","dispose","appRef","injector","get","elements","components","map","c","location","nativeElement","makeVisible","destroy"],"sourceRoot":"","sources":["/Users/selim/repo/eryaz/angular/src/hmr.ts"],"sourcesContent":["import { NgModuleRef, ApplicationRef } from '@angular/core';\nimport { createNewHosts } from '@angularclass/hmr';\n\nexport const hmrBootstrap = (module: any, bootstrap: () => Promise<NgModuleRef<any>>) => {\n    let ngModule: NgModuleRef<any>;\n    module.hot.accept();\n    bootstrap().then(mod => ngModule = mod);\n    module.hot.dispose(() => {\n        const appRef: ApplicationRef = ngModule.injector.get(ApplicationRef);\n        const elements = appRef.components.map(c => c.location.nativeElement);\n        const makeVisible = createNewHosts(elements);\n        ngModule.destroy();\n        makeVisible();\n    });\n};\n"]},"metadata":{},"sourceType":"module"}